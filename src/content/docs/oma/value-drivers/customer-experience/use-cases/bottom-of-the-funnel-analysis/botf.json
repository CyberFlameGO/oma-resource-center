{
  "name": "Customer Experience - Bottom of the Funnel Analysis",
  "description": null,
  "permissions": "PUBLIC_READ_WRITE",
  "pages": [
    {
      "name": "Customer Experience - Bottom of the Funnel Analysis",
      "description": null,
      "widgets": [
        {
          "visualization": {
            "id": "viz.markdown"
          },
          "layout": {
            "column": 1,
            "row": 1,
            "height": 3,
            "width": 2
          },
          "title": "",
          "rawConfiguration": {
            "text": "# BOTTOM_OF_THE_FLOW_NAME\n## Bottom of the Funnel Analysis\n"
          },
          "linkedEntityGuids": null
        },
        {
          "visualization": {
            "id": "viz.funnel"
          },
          "layout": {
            "column": 3,
            "row": 1,
            "height": 3,
            "width": 6
          },
          "title": "Conversion Funnel",
          "rawConfiguration": {
            "nrqlQueries": [
              {
                "accountId": ACCOUNT_ID,
                "query": "SELECT funnel(username, WHERE STEP1_FILTER AS 'STEP1_NAME', WHERE STEPN_FILTER AS 'STEPN_NAME') FROM PageView SINCE 1 WEEK AGO"
              }
            ]
          },
          "linkedEntityGuids": null
        },
        {
          "visualization": {
            "id": "viz.line"
          },
          "layout": {
            "column": 9,
            "row": 1,
            "height": 3,
            "width": 4
          },
          "title": "Failed Conversion Checks",
          "rawConfiguration": {
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": ACCOUNT_ID,
                "query": "FROM SyntheticCheck select percentage(count(*),WHERE result = 'FAILED') where monitorName = 'BOTF_MONITOR_NAME' SINCE 1 WEEK AGO COMPARE WITH 1 WEEK ago TIMESERIES AUTO"
              }
            ],
            "yAxisLeft": {
              "zero": true
            }
          },
          "linkedEntityGuids": null
        },
        {
          "visualization": {
            "id": "viz.billboard"
          },
          "layout": {
            "column": 1,
            "row": 4,
            "height": 2,
            "width": 6
          },
          "title": "Revenue at Risk - Latency",
          "rawConfiguration": {
            "dataFormatters": [],
            "nrqlQueries": [
              {
                "accountId": ACCOUNT_ID,
                "query": "SELECT count(*) * (6.2) AS USD FROM PageView, AjaxRequest  WHERE REVENUE_AT_RISK_LATENCY_FILTER AND  (timeToSettle > 2.0 OR backendDuration > 0.5) SINCE 1 WEEK AGO compare with 1 WEEK ago"
              }
            ],
            "thresholds": []
          },
          "linkedEntityGuids": null
        },
        {
          "visualization": {
            "id": "viz.billboard"
          },
          "layout": {
            "column": 7,
            "row": 4,
            "height": 2,
            "width": 6
          },
          "title": "Revenue at Risk - Errors",
          "rawConfiguration": {
            "dataFormatters": [],
            "nrqlQueries": [
              {
                "accountId": ACCOUNT_ID,
                "query": "FROM AjaxRequest SELECT count(*) * 6.2 AS USD WHERE httpResponseCode >= 300 AND REVENUE_AT_RISK_ERRORS_FILTER SINCE 1 WEEK AGO COMPARE WITH 1 WEEK AGO"
              }
            ],
            "thresholds": []
          },
          "linkedEntityGuids": null
        },
        {
          "visualization": {
            "id": "viz.markdown"
          },
          "layout": {
            "column": 1,
            "row": 6,
            "height": 2,
            "width": 2
          },
          "title": "",
          "rawConfiguration": {
            "text": "# 1. STEP1_NAME \n## Page Performance\n"
          },
          "linkedEntityGuids": null
        },
        {
          "visualization": {
            "id": "viz.billboard"
          },
          "layout": {
            "column": 3,
            "row": 6,
            "height": 2,
            "width": 2
          },
          "title": "STEP1_NAME TTFB",
          "rawConfiguration": {
            "dataFormatters": [],
            "nrqlQueries": [
              {
                "accountId": ACCOUNT_ID,
                "query": "FROM PageView SELECT percentile(backendDuration, 75) AS 'TTFB' WHERE STEP1_FILTER SINCE 1 WEEK AGO COMPARE WITH 1 WEEK AGO"
              }
            ],
            "thresholds": []
          },
          "linkedEntityGuids": null
        },
        {
          "visualization": {
            "id": "viz.billboard"
          },
          "layout": {
            "column": 5,
            "row": 6,
            "height": 2,
            "width": 2
          },
          "title": "STEP1_NAME LCP (s)",
          "rawConfiguration": {
            "dataFormatters": [],
            "nrqlQueries": [
              {
                "accountId": ACCOUNT_ID,
                "query": "SELECT percentile(largestContentfulPaint, 75) FROM PageViewTiming WHERE STEP1_FILTER SINCE 1 WEEK AGO COMPARE WITH 1 WEEK AGO"
              }
            ],
            "thresholds": []
          },
          "linkedEntityGuids": null
        },
        {
          "visualization": {
            "id": "viz.billboard"
          },
          "layout": {
            "column": 7,
            "row": 6,
            "height": 2,
            "width": 2
          },
          "title": "STEP1_NAME CLS (score)",
          "rawConfiguration": {
            "dataFormatters": [],
            "nrqlQueries": [
              {
                "accountId": ACCOUNT_ID,
                "query": "SELECT percentile(cumulativeLayoutShift, 75) FROM PageViewTiming WHERE STEP1_FILTER SINCE 1 WEEK AGO COMPARE WITH 1 WEEK AGO"
              }
            ],
            "thresholds": []
          },
          "linkedEntityGuids": null
        },
        {
          "visualization": {
            "id": "viz.billboard"
          },
          "layout": {
            "column": 9,
            "row": 6,
            "height": 2,
            "width": 2
          },
          "title": "STEP1_NAME FirstInputDelay (ms)",
          "rawConfiguration": {
            "dataFormatters": [],
            "nrqlQueries": [
              {
                "accountId": ACCOUNT_ID,
                "query": "SELECT percentile(firstInputDelay, 75) FROM PageViewTiming WHERE STEP1_FILTER SINCE 1 WEEK AGO COMPARE WITH 1 WEEK AGO"
              }
            ],
            "thresholds": []
          },
          "linkedEntityGuids": null
        },
        {
          "visualization": {
            "id": "viz.markdown"
          },
          "layout": {
            "column": 1,
            "row": 8,
            "height": 2,
            "width": 2
          },
          "title": "",
          "rawConfiguration": {
            "text": "# 2. STEP2_NAME\n## AJAX Request Performance\n"
          },
          "linkedEntityGuids": null
        },
        {
          "visualization": {
            "id": "viz.line"
          },
          "layout": {
            "column": 3,
            "row": 8,
            "height": 2,
            "width": 4
          },
          "title": "STEP2_NAME Response Time (ms)",
          "rawConfiguration": {
            "dataFormatters": [],
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": ACCOUNT_ID,
                "query": "SELECT 2000 AS TargetMaximumResponseTime, average(newrelic.timeslice.value) * 1000 AS `ResponseTime` FROM Metric WHERE metricTimesliceName = 'AJAX_METRIC_NAME' AND `entity.guid` = 'WEB_APP_GUID' SINCE 1 WEEK AGO COMPARE WITH 1 WEEK AGO TIMESERIES AUTO"
              }
            ],
            "yAxisLeft": {
              "zero": true
            }
          },
          "linkedEntityGuids": null
        },
        {
          "visualization": {
            "id": "viz.line"
          },
          "layout": {
            "column": 7,
            "row": 8,
            "height": 2,
            "width": 4
          },
          "title": "STEP2_NAME Success (%)",
          "rawConfiguration": {
            "dataFormatters": [],
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": ACCOUNT_ID,
                "query": "FROM AjaxRequest SELECT 0.98 AS TargetMinumumSuccessRate,percentage(count(*), WHERE httpResponseCode >= 200 AND httpResponseCode <300) AS 'Successful' WHERE httpResponseCode >= 200 AND STEP2_AJAX_REQUEST_FILTER  SINCE 1 WEEK AGO COMPARE WITH 1 WEEK AGO TIMESERIES AUTO"
              }
            ],
            "yAxisLeft": {
              "zero": true
            }
          },
          "linkedEntityGuids": null
        },
        {
          "visualization": {
            "id": "viz.markdown"
          },
          "layout": {
            "column": 1,
            "row": 10,
            "height": 2,
            "width": 2
          },
          "title": "",
          "rawConfiguration": {
            "text": "# 3. STEP3_NAME\n## Page Performance\n"
          },
          "linkedEntityGuids": null
        },
        {
          "visualization": {
            "id": "viz.billboard"
          },
          "layout": {
            "column": 3,
            "row": 10,
            "height": 2,
            "width": 2
          },
          "title": "STEP3_NAME TTFB",
          "rawConfiguration": {
            "dataFormatters": [],
            "nrqlQueries": [
              {
                "accountId": ACCOUNT_ID,
                "query": "FROM PageView SELECT percentile(backendDuration, 75) AS 'TTFB' WHERE STEP3_FILTER SINCE 1 WEEK AGO COMPARE WITH 1 WEEK AGO"
              }
            ],
            "thresholds": []
          },
          "linkedEntityGuids": null
        },
        {
          "visualization": {
            "id": "viz.billboard"
          },
          "layout": {
            "column": 5,
            "row": 10,
            "height": 2,
            "width": 2
          },
          "title": "STEP3_NAME LCP (s)",
          "rawConfiguration": {
            "dataFormatters": [],
            "nrqlQueries": [
              {
                "accountId": ACCOUNT_ID,
                "query": "SELECT percentile(largestContentfulPaint, 75) FROM PageViewTiming WHERE STEP3_FILTER SINCE 1 WEEK AGO COMPARE WITH 1 WEEK AGO"
              }
            ],
            "thresholds": []
          },
          "linkedEntityGuids": null
        },
        {
          "visualization": {
            "id": "viz.billboard"
          },
          "layout": {
            "column": 7,
            "row": 10,
            "height": 2,
            "width": 2
          },
          "title": "STEP3_NAME CLS (score)",
          "rawConfiguration": {
            "dataFormatters": [],
            "nrqlQueries": [
              {
                "accountId": ACCOUNT_ID,
                "query": "SELECT percentile(cumulativeLayoutShift, 75) FROM PageViewTiming WHERE STEP3_FILTER SINCE 1 WEEK AGO COMPARE WITH 1 WEEK AGO"
              }
            ],
            "thresholds": []
          },
          "linkedEntityGuids": null
        },
        {
          "visualization": {
            "id": "viz.billboard"
          },
          "layout": {
            "column": 9,
            "row": 10,
            "height": 2,
            "width": 2
          },
          "title": "STEP3_NAME FirstInputDelay (ms)",
          "rawConfiguration": {
            "dataFormatters": [],
            "nrqlQueries": [
              {
                "accountId": ACCOUNT_ID,
                "query": "SELECT percentile(firstInputDelay, 75) FROM PageViewTiming WHERE STEP3_FILTER SINCE 1 WEEK AGO COMPARE WITH 1 WEEK AGO"
              }
            ],
            "thresholds": []
          },
          "linkedEntityGuids": null
        }
      ]
    }
  ]
}
